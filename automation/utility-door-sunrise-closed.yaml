alias: 'Utility door open before sunrise closed'
initial_state: 'on'
trigger:
  platform: state
  entity_id: sensor.utility_door
  to: 'closed'
condition:
  condition: and
  conditions:
    - condition: sun
      before: sunrise
    - condition: state
      entity_id: switch.garden_lights_switch
      state: 'on'
action:
  - delay: 00:00:01
  - service: homeassistant.turn_on
    entity_id: automation.utility_door_open_before_sunrise_turn_off
